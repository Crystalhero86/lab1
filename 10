import java.util.*;

public class Leaky {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.print("Enter bucket size: ");
        int bucket = sc.nextInt();
        System.out.print("Enter number of groups: ");
        int n = sc.nextInt();

        int[] packets = new int[n], in_bw = new int[n];
        int total = 0, req_bw = 0;

        for (int i = 0; i < n; i++) {
            System.out.print("Packets for group " + (i + 1) + ": ");
            packets[i] = sc.nextInt();
            System.out.print("Input bandwidth for group " + (i + 1) + ": ");
            in_bw[i] = sc.nextInt();

            total += packets[i];
            if (total > bucket) {
                int drop = total - bucket;
                System.out.println("Bucket Overflow! " + drop + " packets dropped.");
                total -= drop;
                packets[i] -= drop;
            }
            req_bw += packets[i] * in_bw[i];
        }

        System.out.println("\nTotal required bandwidth: " + req_bw);
        System.out.print("Enter output bandwidth: ");
        int out_bw = sc.nextInt(), remaining_bw = req_bw, remaining_pkts = total;

        while (remaining_bw > 0 && remaining_pkts > 0) {
            remaining_bw -= out_bw;
            System.out.println("Data sent, " + (--remaining_pkts) + " packets left.");
            if (remaining_bw > 0)
                System.out.println("Remaining bandwidth: " + remaining_bw);
            if (remaining_bw < out_bw && remaining_pkts > 0)
                System.out.println(remaining_pkts + " packets not confirmed due to low bandwidth!");
        }
        sc.close();
    }
}
